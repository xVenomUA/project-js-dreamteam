{"version":3,"file":"subscription-935feb41.js","sources":["../../src/js/APIFoodBoutique.js","../../src/img/icon.svg","../../src/js/subscription.js"],"sourcesContent":["// Валентин Громадський  .запити на бекенд\nimport axios from 'axios';\nconst BASE_URL = 'https://food-boutique.b.goit.study/api';\n\n// запит для рендеру списку категорій\nexport async function APICategories() {\n  try {\n    const response = await axios.get(`${BASE_URL}/products/categories`);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n//  запит для рендеру карток продуктів з фільтрацією\nexport async function APIProductSearch(\n  keyword,\n  category,\n  byABC,\n  byPrice,\n  byPopularity,\n  page,\n  limit\n) {\n  try {\n    const option = new URLSearchParams({\n      keyword: keyword || '',\n      category: category || '',\n      byABC: byABC || false,\n      byPrice: byPrice || false,\n      byPopularity: byPopularity || false,\n      page: page,\n      limit: limit,\n    });\n    const response = await axios.get(\n      `${BASE_URL}/products?${option.toString()}`\n    );\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\n// запит для детальної інформація про продукт ( пошук по id)\nexport async function getProductById(id) {\n  try {\n    const response = await axios.get(`${BASE_URL}/products/${id}`);\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\n// запити для рендеру карток популярних продуктів\nexport async function getPopularProduct() {\n  try {\n    const popularProducts = await axios.get(\n      `${BASE_URL}/products/popular?limit=5`\n    );\n    return popularProducts;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\n// запити для рендеру карток продуктів з знижкою\nexport async function getDiskountProduct() {\n  try {\n    const diskountProduct = await axios.get(`${BASE_URL}/products/discount`);\n    return diskountProduct;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\n// запит для підписки на розсилку нових продуків\nexport async function postSubscription(data) {\n  const response = await axios.post(`${BASE_URL}/subscription`, data);\n  return response.data;\n}\n\n// запит для оформлення замовлення продуктів\nexport async function postOrders(data) {\n  const response = await axios.post(`${BASE_URL}/orders`, data);\n  return response.data;\n}\n","export default \"__VITE_ASSET__4d816d44__\"","import { postSubscription } from \"./APIFoodBoutique\";\n\nconst form = document.querySelector('.footer-form');\nconst modal = document.querySelector('.modal-backdrop');\nconst modalSub = document.querySelector('.modal-subscribe-container');\nconst modalUnsub = document.querySelector('.modal-unsubscription-container');\nconst closeBtns = document.querySelectorAll('.modal-close-btn');\nconst loader = document.querySelector('.loader');\nconst btnToTop = document.querySelector('.footer-btn-to-top');\nconst containerFooter = document.querySelector('.footer-container');\nconst someModal = document.querySelector('.modal-container')\n\nsomeModal.classList.add('is-hidden');\n\nfunction toggleModal(isVisible, isSubscribed = true) {\n    modal.classList.toggle('is-hidden', !isVisible);\n    modalSub.classList.toggle('is-hidden', !isSubscribed);\n    modalUnsub.classList.toggle('is-hidden', isSubscribed);\n}\n\nfunction showError() {\n    const errorMessageDiv = document.querySelector('.error-message');\n    errorMessageDiv.style.display = 'block';\n    setTimeout(() => errorMessageDiv.style.display = 'none', 2000);\n}\n\nasync function onSubmit(evt) {\n    evt.preventDefault();\n    const email = form.querySelector('.footer-form-email').value;\n    loader.classList.remove('is-hidden');\n    function handleClickOutsideModal(event) {\n        if (event.target === modal) {\n            toggleModal(false);\n        }\n    }\n    modal.addEventListener('click', handleClickOutsideModal);\n\n    try {\n        const response = await postSubscription({ email });\n        console.log(response.data);\n        toggleModal(true);\n    } catch (error) {\n        if (error.response) {\n            error.response.status === 409 ? toggleModal(true, false) : showError();\n        }\n    } finally {\n        loader.classList.add('is-hidden');\n        form.reset();\n    }\n}\n\nfunction setupScrollToTopButton() {\n    const onObserve = (entries) => {\n        entries.forEach(entry => {\n            btnToTop.style.display = entry.isIntersecting ? 'block' : 'none';\n        });\n    };\n\n    const observer = new IntersectionObserver(onObserve, { root: null, threshold: 0.5 });\n    observer.observe(containerFooter);\n\n    btnToTop.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const pathname = window.location.pathname;\n    if (pathname.endsWith(\"index.html\") || pathname === \"/\") {\n        setupScrollToTopButton();\n    }\n});\n\nform.addEventListener('submit', onSubmit);\ncloseBtns.forEach(btn => btn.addEventListener('click', () => toggleModal(false)));"],"names":["BASE_URL","APICategories","axios","error","APIProductSearch","keyword","category","byABC","byPrice","byPopularity","page","limit","option","getProductById","id","getPopularProduct","getDiskountProduct","postSubscription","data","iconimg","form","modal","modalSub","modalUnsub","closeBtns","loader","btnToTop","containerFooter","someModal","toggleModal","isVisible","isSubscribed","showError","errorMessageDiv","onSubmit","evt","email","handleClickOutsideModal","event","response","setupScrollToTopButton","onObserve","entries","entry","pathname","btn"],"mappings":"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"}